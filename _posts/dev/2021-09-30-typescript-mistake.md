---
layout: post
title: 타입스크립트 맹점 2가지
categories: [dev]
tags:
  - typescript
  - nodejs
author: 문재범
email: jaebeommun@gmail.com
date: 2021-09-30
---



### 타입스크립트 맹점 2가지

현재 팀의 주 사용 언어는 자바스크립트다. 백 엔드는 타입스크립트를 사용한다. 자바스크립트는 많이 사용하던 언어여서 적응하는데 어려움이 없었지만, 타입스크립트는 처음 사용해본 언어였다. 타입스크립트는 자바스크립트에 타입을 추가한 확장판같은 언어였다. 

여기서 타입을 추가해주는 가능외에 자바스크립트를 조금 더 객체지향같이 사용 할 수 있게 도와주는 기능들이 추가되었다. (이 기능들은 자바나 C#같은 객체지향언어에서는 이미 지원하는 기능이다...) 자바스크립트도 진화를 거듭하면서 클래스 방식으로 프로그램을 작성 할 수 있는 문법을 지원하고 있지만 실제로 자바를 사용하듯이 사용하려고 하면 이상하게 어색하고 불가능하게 느껴졌다.

타입스크립트를 사용해보니 자바스크립트에 비해서 자바나 C#같은 객체지향언어처럼 사용 할 수 있었다. 타입스크립트에는 인터페이스, 추상 클래스, 제네릭과 같은 기능들이 추가되었고, 이는 기존의 자바 개발자에게는 익숙한 문법이었다.

타입스크립트의 문법이 익숙한 나머지 자바나 C#을 생각하고, 타입스크립트를 사용하다보니 몇 가지 맹점을 찾게 되었다. 이 와 관련된 내용 2가지를 공유해보려고 한다.



간단한 예제로 설명해보려고 한다.

회사 내부에서 필요한 정보를 웹에서 크롤링하는 프로그램을 만들고 있는데, 다양한 형식을 하나의 크롤러 객체로 처리 하기 어렵기 때문에 이를 해결 할 수 있는 방법이 필요했다. 추상클래스를 선언하고 거기에 맞는 구현클래스가 필요했다.

위 상황을 코드로 표현하면 대략 아래와 같다.

```typescript
abstract class Crawler {
    readonly baseUrl: string = 'www.catchcrew.com'
    
    abstract craw(data: someType): void 
    
    commonMethod() {
        // ...
    }
}

class TableCrawler extends Crawler {
    async craw() {
        // ...
    }
}
```



#### 1. 시그니처보다 더 적은 개수의 파라미터는 허용됨

위 코드를 작성하고 의아한 점이 있었다. 분명히 추상메서드에 시그니처에는 someType의 data라고 시그니처를 정의했지만, craw에는 어떠한 파라미터도 정의되어있지 않다. 그러나 타입스크립트에서는 아무런 경고도 띄어주지 않았다. 

엄격한 타입을 제한하는 언어들은 당연히 경고가 나올 것 이다. 마찬가지로 타입스크립도 경고를 띄어줄지 알았지만 아무런 경고도 없었다. 위와 관련해서 타입스크립트 깃허브 QNA에서 의도된 동작이라고 설명하고 있다.



#### 2. 반환 타입이 void 인 시그니처에 다른 반환타입도 허용됨

1번 경우와 마찬가지로 위 코드를 보면 craw에 async 키워드가 달려있다. 그렇기 때문에 Promise 객체를 리턴하지만 타입스크립트는 어떠한 경고도 띄어주지 않았다. void면 아무것도 반환하지 않아야 하는것 아닌가.. 라고 생각했지만 생각과는 전혀 다른 결과이다.

이 또한 타입스크립트 깃허브 QNA에서 의도된 동작이라고 한다.



#### 결론 : 타입스크립트에서 의도된 것

타입스크립트 깃허브 도큐먼트에서는 대체가능성 때문이라고 한다. 자세한 내용은 깃허브 QNA를 참고하고, 간단하게 설명하면 타입스크립트의 타입시스템은 대체가능성(리스코프 치환 원칙)을 참조한다고 한다. 간단하게 대체가능성에 대해서 설명하자면, 어떤 물체 X가 Y로 대체될 수 있을 때  Y는 X에 할당 될 수 있다는 것이다. 도큐먼트의 설명이 잘 이해가 되지는 않지만, 내가 이해하기로는 void로 선언 한 것 자체가 반환 타입이 필요 없다는 의미가 되고, 이는 반환타입이 있던 없던 상관이 없기 때문에 대체가능하다고 판단 한 것 같다. (그렇다면 1번의 경우는...?)

그럼 내가 의도한대로 하려면 어떻게 해야할까? 찾아본 결과 방법이 따로 존재하지 않았다. 자바스크립트 태생 자체가 엄격한 타입 제한을 두고 만든 언어가 아니기 때문에 한계가 있지 않을까 라는 생각이 든다. 
